<mxfile host="app.diagrams.net" modified="2026-01-31T12:00:00.000Z" agent="Mozilla/5.0" version="21.0.0" type="device">
  <diagram name="POC App Multi-Region Architecture" id="pocapp-architecture">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;POC App - Multi-Region Resilient Architecture&lt;/b&gt;&lt;br&gt;RTO: 1 hour | RPO: 4 hours" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;" vertex="1" parent="1">
          <mxGeometry x="550" y="10" width="500" height="40" as="geometry" />
        </mxCell>
        
        <!-- Users Icon -->
        <mxCell id="users" value="" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3D;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.users;" vertex="1" parent="1">
          <mxGeometry x="765" y="60" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="users-label" value="Users" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="770" y="130" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- Azure Front Door -->
        <mxCell id="frontdoor" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Front_Doors.svg;" vertex="1" parent="1">
          <mxGeometry x="768" y="170" width="64" height="64" as="geometry" />
        </mxCell>
        <mxCell id="frontdoor-label" value="Azure Front Door&lt;br&gt;(Premium + WAF)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="745" y="235" width="110" height="30" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Users to Front Door -->
        <mxCell id="arrow-users-fd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0078D4;" edge="1" parent="1" source="users" target="frontdoor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Private DNS Zone (Center) -->
        <mxCell id="dns-zone" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/DNS_Zones.svg;" vertex="1" parent="1">
          <mxGeometry x="768" y="500" width="64" height="64" as="geometry" />
        </mxCell>
        <mxCell id="dns-label" value="Private DNS&lt;br&gt;Zones for&lt;br&gt;Private Endpoints" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="745" y="565" width="110" height="45" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- PRIMARY REGION: East US 2 -->
        <!-- ========================= -->
        <mxCell id="region-primary" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#0078D4;fillColor=none;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="680" height="520" as="geometry" />
        </mxCell>
        <mxCell id="region-primary-label" value="&lt;b&gt;East US 2&lt;/b&gt; (Primary Region)" style="text;html=1;strokeColor=none;fillColor=#E6F2FA;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="280" y="285" width="180" height="30" as="geometry" />
        </mxCell>
        
        <!-- Primary VNet Box -->
        <mxCell id="vnet-primary" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=4 4;strokeColor=#0078D4;fillColor=#E6F2FA;strokeWidth=1;opacity=50;" vertex="1" parent="1">
          <mxGeometry x="100" y="330" width="560" height="450" as="geometry" />
        </mxCell>
        <mxCell id="vnet-primary-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Virtual_Networks.svg;" vertex="1" parent="1">
          <mxGeometry x="105" y="335" width="40" height="24" as="geometry" />
        </mxCell>
        <mxCell id="vnet-primary-label" value="Virtual Network&lt;br&gt;10.1.0.0/16" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="150" y="330" width="100" height="35" as="geometry" />
        </mxCell>
        
        <!-- Primary: snet-appservice -->
        <mxCell id="snet-app-primary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="380" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-app-primary-label" value="snet-appservice (10.1.1.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="382" width="180" height="15" as="geometry" />
        </mxCell>
        
        <!-- Web App Primary -->
        <mxCell id="webapp-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/app_services/App_Services.svg;" vertex="1" parent="1">
          <mxGeometry x="145" y="410" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="webapp-primary-label" value="Web App&lt;br&gt;P1v3 x 3 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="130" y="460" width="80" height="35" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity Web Primary -->
        <mxCell id="mi-web-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Managed_Identities.svg;" vertex="1" parent="1">
          <mxGeometry x="220" y="420" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mi-web-primary-label" value="Managed&lt;br&gt;Identity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="210" y="460" width="60" height="25" as="geometry" />
        </mxCell>
        
        <!-- Private Endpoint App Primary -->
        <mxCell id="pe-app-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="300" y="420" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-app-primary-label" value="API App&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="290" y="465" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Primary: snet-functionapp -->
        <mxCell id="snet-func-primary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="510" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-func-primary-label" value="snet-functionapp (10.1.2.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="512" width="180" height="15" as="geometry" />
        </mxCell>
        
        <!-- Function App Primary -->
        <mxCell id="funcapp-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/compute/Function_Apps.svg;" vertex="1" parent="1">
          <mxGeometry x="145" y="540" width="48" height="42" as="geometry" />
        </mxCell>
        <mxCell id="funcapp-primary-label" value="Function App&lt;br&gt;EP2 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="130" y="585" width="80" height="35" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity Func Primary -->
        <mxCell id="mi-func-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Managed_Identities.svg;" vertex="1" parent="1">
          <mxGeometry x="220" y="545" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mi-func-primary-label" value="Managed&lt;br&gt;Identity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="210" y="585" width="60" height="25" as="geometry" />
        </mxCell>
        
        <!-- SQL Private Endpoint Primary -->
        <mxCell id="pe-sql-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="300" y="545" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-sql-primary-label" value="SQL&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="290" y="590" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Primary: snet-privateendpoints -->
        <mxCell id="snet-pe-primary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="380" width="250" height="250" as="geometry" />
        </mxCell>
        <mxCell id="snet-pe-primary-label" value="snet-privateendpoints (10.1.4.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="395" y="382" width="200" height="15" as="geometry" />
        </mxCell>
        
        <!-- Redis Private Endpoint Primary -->
        <mxCell id="pe-redis-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="420" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-redis-primary-label" value="Redis&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="408" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- Storage Private Endpoint Primary -->
        <mxCell id="pe-storage-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="500" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-storage-primary-label" value="Storage&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="488" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- KV Private Endpoint Primary -->
        <mxCell id="pe-kv-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="580" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-kv-primary-label" value="Key Vault&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="568" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- SQL MI Primary -->
        <mxCell id="sqlmi-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/SQL_Managed_Instance.svg;" vertex="1" parent="1">
          <mxGeometry x="500" y="530" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sqlmi-primary-label" value="SQL MI&lt;br&gt;Primary (BC)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="485" y="580" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- Primary: snet-sqlmi -->
        <mxCell id="snet-sqlmi-primary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="640" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-sqlmi-primary-label" value="snet-sqlmi (10.1.5.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="642" width="150" height="15" as="geometry" />
        </mxCell>
        
        <!-- APIM Primary -->
        <mxCell id="apim-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/integration/API_Management_Services.svg;" vertex="1" parent="1">
          <mxGeometry x="145" y="670" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="apim-primary-label" value="API Management&lt;br&gt;Premium x 2 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="120" y="720" width="100" height="35" as="geometry" />
        </mxCell>
        
        <!-- Redis Primary -->
        <mxCell id="redis-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/Cache_Redis.svg;" vertex="1" parent="1">
          <mxGeometry x="250" y="670" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="redis-primary-label" value="Redis Cache&lt;br&gt;Premium P1 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="230" y="720" width="90" height="35" as="geometry" />
        </mxCell>
        
        <!-- Outside Primary VNet: Key Vault -->
        <mxCell id="kv-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/security/Key_Vaults.svg;" vertex="1" parent="1">
          <mxGeometry x="55" y="400" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="kv-primary-label" value="Key Vault&lt;br&gt;Premium" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="40" y="435" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Outside Primary VNet: Storage -->
        <mxCell id="storage-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/storage/Storage_Accounts.svg;" vertex="1" parent="1">
          <mxGeometry x="55" y="480" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="storage-primary-label" value="Storage&lt;br&gt;RA-GZRS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="40" y="515" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Outside Primary VNet: App Service Plan -->
        <mxCell id="asp-primary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/app_services/App_Service_Plans.svg;" vertex="1" parent="1">
          <mxGeometry x="55" y="560" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="asp-primary-label" value="App Service&lt;br&gt;Plan" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="40" y="595" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Azure AD Left -->
        <mxCell id="aad-left" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Azure_Active_Directory.svg;" vertex="1" parent="1">
          <mxGeometry x="55" y="320" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="aad-left-label" value="Azure AD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="43" y="355" width="60" height="15" as="geometry" />
        </mxCell>
        
        <!-- ========================== -->
        <!-- SECONDARY REGION: Central US -->
        <!-- ========================== -->
        <mxCell id="region-secondary" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#F57C00;fillColor=none;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="880" y="280" width="680" height="520" as="geometry" />
        </mxCell>
        <mxCell id="region-secondary-label" value="&lt;b&gt;Central US&lt;/b&gt; (Secondary Region)" style="text;html=1;strokeColor=none;fillColor=#FFF3E0;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="1140" y="285" width="180" height="30" as="geometry" />
        </mxCell>
        
        <!-- Secondary VNet Box -->
        <mxCell id="vnet-secondary" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=4 4;strokeColor=#F57C00;fillColor=#FFF8E1;strokeWidth=1;opacity=50;" vertex="1" parent="1">
          <mxGeometry x="940" y="330" width="560" height="450" as="geometry" />
        </mxCell>
        <mxCell id="vnet-secondary-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Virtual_Networks.svg;" vertex="1" parent="1">
          <mxGeometry x="945" y="335" width="40" height="24" as="geometry" />
        </mxCell>
        <mxCell id="vnet-secondary-label" value="Virtual Network&lt;br&gt;10.2.0.0/16" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="990" y="330" width="100" height="35" as="geometry" />
        </mxCell>
        
        <!-- Secondary: snet-privateendpoints -->
        <mxCell id="snet-pe-secondary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="380" width="250" height="250" as="geometry" />
        </mxCell>
        <mxCell id="snet-pe-secondary-label" value="snet-privateendpoints (10.2.4.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="965" y="382" width="200" height="15" as="geometry" />
        </mxCell>
        
        <!-- Redis Private Endpoint Secondary -->
        <mxCell id="pe-redis-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="980" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-redis-secondary-label" value="Redis&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="968" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- Storage Private Endpoint Secondary -->
        <mxCell id="pe-storage-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="1060" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-storage-secondary-label" value="Storage&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1048" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- KV Private Endpoint Secondary -->
        <mxCell id="pe-kv-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="1140" y="410" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-kv-secondary-label" value="Key Vault&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1128" y="455" width="70" height="25" as="geometry" />
        </mxCell>
        
        <!-- SQL MI Secondary -->
        <mxCell id="sqlmi-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/SQL_Managed_Instance.svg;" vertex="1" parent="1">
          <mxGeometry x="1060" y="530" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sqlmi-secondary-label" value="SQL MI&lt;br&gt;Replica (RO)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1045" y="580" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- Secondary: snet-appservice -->
        <mxCell id="snet-app-secondary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1230" y="380" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-app-secondary-label" value="snet-appservice (10.2.1.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1235" y="382" width="180" height="15" as="geometry" />
        </mxCell>
        
        <!-- Web App Secondary -->
        <mxCell id="webapp-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/app_services/App_Services.svg;" vertex="1" parent="1">
          <mxGeometry x="1380" y="410" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="webapp-secondary-label" value="Web App&lt;br&gt;P1v3 x 3 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1365" y="460" width="80" height="35" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity Web Secondary -->
        <mxCell id="mi-web-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Managed_Identities.svg;" vertex="1" parent="1">
          <mxGeometry x="1320" y="420" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mi-web-secondary-label" value="Managed&lt;br&gt;Identity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1310" y="460" width="60" height="25" as="geometry" />
        </mxCell>
        
        <!-- Private Endpoint App Secondary -->
        <mxCell id="pe-app-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="1255" y="420" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-app-secondary-label" value="API App&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1245" y="465" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Secondary: snet-functionapp -->
        <mxCell id="snet-func-secondary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1230" y="510" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-func-secondary-label" value="snet-apiapp (10.2.3.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1235" y="512" width="180" height="15" as="geometry" />
        </mxCell>
        
        <!-- Function App Secondary -->
        <mxCell id="funcapp-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/compute/Function_Apps.svg;" vertex="1" parent="1">
          <mxGeometry x="1381" y="540" width="48" height="42" as="geometry" />
        </mxCell>
        <mxCell id="funcapp-secondary-label" value="Function App&lt;br&gt;EP2 (ZR)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1365" y="585" width="80" height="35" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity Func Secondary -->
        <mxCell id="mi-func-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Managed_Identities.svg;" vertex="1" parent="1">
          <mxGeometry x="1320" y="545" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mi-func-secondary-label" value="Managed&lt;br&gt;Identity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1310" y="585" width="60" height="25" as="geometry" />
        </mxCell>
        
        <!-- SQL Private Endpoint Secondary -->
        <mxCell id="pe-sql-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Private_Endpoint.svg;" vertex="1" parent="1">
          <mxGeometry x="1255" y="545" width="45" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pe-sql-secondary-label" value="SQL&lt;br&gt;Private EP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1245" y="590" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Secondary: snet-sqlmi -->
        <mxCell id="snet-sqlmi-secondary" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1230" y="640" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="snet-sqlmi-secondary-label" value="snet-sqlmi (10.2.5.0/24)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1235" y="642" width="150" height="15" as="geometry" />
        </mxCell>
        
        <!-- APIM Secondary -->
        <mxCell id="apim-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/integration/API_Management_Services.svg;" vertex="1" parent="1">
          <mxGeometry x="1380" y="670" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="apim-secondary-label" value="API Management&lt;br&gt;Secondary" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1355" y="720" width="100" height="35" as="geometry" />
        </mxCell>
        
        <!-- Redis Secondary -->
        <mxCell id="redis-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/Cache_Redis.svg;" vertex="1" parent="1">
          <mxGeometry x="1270" y="670" width="50" height="50" as="geometry" />
        </mxCell>
        <mxCell id="redis-secondary-label" value="Redis Cache&lt;br&gt;Geo-Replica" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1250" y="720" width="90" height="35" as="geometry" />
        </mxCell>
        
        <!-- Outside Secondary VNet: Key Vault -->
        <mxCell id="kv-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/security/Key_Vaults.svg;" vertex="1" parent="1">
          <mxGeometry x="1510" y="400" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="kv-secondary-label" value="Key Vault&lt;br&gt;Premium" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1495" y="435" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Outside Secondary VNet: Storage -->
        <mxCell id="storage-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/storage/Storage_Accounts.svg;" vertex="1" parent="1">
          <mxGeometry x="1510" y="480" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="storage-secondary-label" value="Storage&lt;br&gt;RA-GZRS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1495" y="515" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Outside Secondary VNet: App Service Plan -->
        <mxCell id="asp-secondary" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/app_services/App_Service_Plans.svg;" vertex="1" parent="1">
          <mxGeometry x="1510" y="560" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="asp-secondary-label" value="App Service&lt;br&gt;Plan" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1495" y="595" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- Azure AD Right -->
        <mxCell id="aad-right" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/identity/Azure_Active_Directory.svg;" vertex="1" parent="1">
          <mxGeometry x="1510" y="320" width="35" height="35" as="geometry" />
        </mxCell>
        <mxCell id="aad-right-label" value="Azure AD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1498" y="355" width="60" height="15" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- CONNECTIONS -->
        <!-- ========================= -->
        
        <!-- Front Door to Primary Web App -->
        <mxCell id="conn-fd-webapp1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0078D4;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontdoor" target="webapp-primary">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="265" />
              <mxPoint x="170" y="265" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn-fd-webapp1-label" value="50%" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;fontColor=#0078D4;" vertex="1" parent="1">
          <mxGeometry x="300" y="245" width="40" height="20" as="geometry" />
        </mxCell>
        
        <!-- Front Door to Secondary Web App -->
        <mxCell id="conn-fd-webapp2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#F57C00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontdoor" target="webapp-secondary">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="265" />
              <mxPoint x="1405" y="265" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn-fd-webapp2-label" value="50%" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=1;fontColor=#F57C00;" vertex="1" parent="1">
          <mxGeometry x="1250" y="245" width="40" height="20" as="geometry" />
        </mxCell>
        
        <!-- SQL MI Failover Group -->
        <mxCell id="failover-group" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#D32F2F;dashed=0;startArrow=classic;startFill=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="sqlmi-primary" target="sqlmi-secondary">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="failover-label" value="&lt;b&gt;Failover Group&lt;/b&gt;&lt;br&gt;(60 min grace period)" style="text;html=1;strokeColor=none;fillColor=#FFEBEE;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontColor=#D32F2F;" vertex="1" parent="1">
          <mxGeometry x="720" y="620" width="160" height="35" as="geometry" />
        </mxCell>
        
        <!-- Redis Geo-Replication -->
        <mxCell id="redis-repl" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#F57C00;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="redis-primary" target="redis-secondary">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="275" y="760" />
              <mxPoint x="1295" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="redis-repl-label" value="Geo-Replication" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=2;fontColor=#F57C00;" vertex="1" parent="1">
          <mxGeometry x="745" y="755" width="110" height="20" as="geometry" />
        </mxCell>
        
        <!-- VNet Peering -->
        <mxCell id="vnet-peering" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#7B1FA2;dashed=1;dashPattern=4 4;startArrow=classic;startFill=1;endArrow=classic;endFill=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="790" as="sourcePoint" />
            <mxPoint x="940" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vnet-peering-label" value="&lt;b&gt;VNet Peering&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#7B1FA2;" vertex="1" parent="1">
          <mxGeometry x="745" y="800" width="110" height="20" as="geometry" />
        </mxCell>
        
        <!-- Primary PE to DNS -->
        <mxCell id="pe-dns-primary" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#607D8B;dashed=1;" edge="1" parent="1" source="pe-kv-primary" target="dns-zone">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Secondary PE to DNS -->
        <mxCell id="pe-dns-secondary" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#607D8B;dashed=1;" edge="1" parent="1" source="pe-kv-secondary" target="dns-zone">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- MI to KV Primary -->
        <mxCell id="mi-kv-primary" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#7B1FA2;dashed=1;" edge="1" parent="1" source="mi-web-primary" target="kv-primary">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- MI to KV Secondary -->
        <mxCell id="mi-kv-secondary" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#7B1FA2;dashed=1;" edge="1" parent="1" source="mi-web-secondary" target="kv-secondary">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#BDBDBD;fillColor=#FAFAFA;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="820" width="400" height="70" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="825" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-1" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#0078D4;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="50" y="860" as="sourcePoint" />
            <mxPoint x="100" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-1-text" value="Traffic Flow" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="105" y="852" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-2" value="" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=3;strokeColor=#D32F2F;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="860" as="sourcePoint" />
            <mxPoint x="220" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-2-text" value="Failover Group" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="225" y="852" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-3" value="" style="endArrow=none;html=1;strokeWidth=2;strokeColor=#7B1FA2;dashed=1;dashPattern=4 4;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="860" as="sourcePoint" />
            <mxPoint x="350" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-3-text" value="VNet Peering" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="355" y="852" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-notes" value="ZR = Zone Redundant | BC = Business Critical | RO = Read-Only | EP = Elastic Premium" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="50" y="872" width="380" height="15" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
