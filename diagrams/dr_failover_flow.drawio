<mxfile host="app.diagrams.net" modified="2026-02-03T12:00:00.000Z" agent="Mozilla/5.0" version="21.0.0" type="device">
  <diagram name="DR Failover Flow" id="dr-failover-flow">
    <mxGraphModel dx="1200" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;Azure Automated DR Failover Architecture&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="450" y="20" width="500" height="40" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- TRIGGER SECTION -->
        <!-- ========================= -->
        <mxCell id="trigger-section" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#107C10;fillColor=#E8F5E9;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="280" height="300" as="geometry" />
        </mxCell>
        <mxCell id="trigger-label" value="&lt;b&gt;1. ALERT TRIGGERS&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#107C10;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="240" height="30" as="geometry" />
        </mxCell>
        
        <!-- SQL MI Alert -->
        <mxCell id="sqlmi-alert" value="SQL MI&#xa;Unavailable&#xa;(CPU = 0%)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E74C3C;fontColor=#FFFFFF;strokeColor=#C0392B;" vertex="1" parent="1">
          <mxGeometry x="60" y="140" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- App Service Alert -->
        <mxCell id="app-alert" value="App Service&#xa;Health &lt; 90%&#xa;or 5xx &gt; 100" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E74C3C;fontColor=#FFFFFF;strokeColor=#C0392B;" vertex="1" parent="1">
          <mxGeometry x="60" y="220" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- Redis Alert -->
        <mxCell id="redis-alert" value="Redis&#xa;Unavailable&#xa;(Load &gt; 99%)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E74C3C;fontColor=#FFFFFF;strokeColor=#C0392B;" vertex="1" parent="1">
          <mxGeometry x="60" y="300" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- Region Health Alert -->
        <mxCell id="region-alert" value="Azure Region&#xa;Service&#xa;Incident" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E74C3C;fontColor=#FFFFFF;strokeColor=#C0392B;" vertex="1" parent="1">
          <mxGeometry x="180" y="220" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- Azure Monitor Icon -->
        <mxCell id="azure-monitor" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/management_governance/Monitor.svg;" vertex="1" parent="1">
          <mxGeometry x="195" y="140" width="65" height="52" as="geometry" />
        </mxCell>
        <mxCell id="monitor-label" value="Azure&#xa;Monitor" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="195" y="192" width="65" height="25" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- ACTION GROUP SECTION -->
        <!-- ========================= -->
        <mxCell id="action-section" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#0078D4;fillColor=#E6F2FA;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="360" y="80" width="200" height="300" as="geometry" />
        </mxCell>
        <mxCell id="action-label" value="&lt;b&gt;2. ACTION GROUP&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#0078D4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="370" y="90" width="180" height="30" as="geometry" />
        </mxCell>
        
        <!-- Action Group Box -->
        <mxCell id="ag-box" value="DR Failover&#xa;Action Group" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0078D4;fontColor=#FFFFFF;strokeColor=#005A9E;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="395" y="140" width="130" height="50" as="geometry" />
        </mxCell>
        
        <!-- Email Action -->
        <mxCell id="email-action" value="ðŸ“§ Email&#xa;Notification" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#0078D4;" vertex="1" parent="1">
          <mxGeometry x="395" y="210" width="130" height="50" as="geometry" />
        </mxCell>
        
        <!-- Webhook Action -->
        <mxCell id="webhook-action" value="ðŸ”— Webhook&#xa;(POST to Runbook)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF8C00;fontColor=#FFFFFF;strokeColor=#CC7000;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="395" y="280" width="130" height="50" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Alerts to Action Group -->
        <mxCell id="arrow-alert-ag" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#107C10;endArrow=blockThin;endFill=1;" edge="1" parent="1" source="trigger-section" target="action-section">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-alert-label" value="Alert Fires" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="320" y="200" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- AUTOMATION SECTION -->
        <!-- ========================= -->
        <mxCell id="automation-section" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#5C2D91;fillColor=#F3E5F5;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="600" y="80" width="260" height="300" as="geometry" />
        </mxCell>
        <mxCell id="automation-label" value="&lt;b&gt;3. AUTOMATION ACCOUNT&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#5C2D91;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="610" y="90" width="240" height="30" as="geometry" />
        </mxCell>
        
        <!-- Automation Account Icon -->
        <mxCell id="aa-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/management_governance/Automation_Accounts.svg;" vertex="1" parent="1">
          <mxGeometry x="700" y="130" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aa-label" value="Azure Automation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="680" y="185" width="100" height="20" as="geometry" />
        </mxCell>
        
        <!-- Runbook -->
        <mxCell id="runbook" value="Invoke-DRFailover.ps1&#xa;PowerShell Runbook" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#5C2D91;fontColor=#FFFFFF;strokeColor=#4A2070;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="640" y="210" width="180" height="50" as="geometry" />
        </mxCell>
        
        <!-- Managed Identity -->
        <mxCell id="mi" value="ðŸ” System-Assigned&#xa;Managed Identity" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#5C2D91;" vertex="1" parent="1">
          <mxGeometry x="640" y="280" width="180" height="50" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Webhook to Automation -->
        <mxCell id="arrow-webhook-aa" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#FF8C00;endArrow=blockThin;endFill=1;" edge="1" parent="1" source="webhook-action" target="automation-section">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-webhook-label" value="HTTPS POST" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="545" y="290" width="70" height="20" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- FAILOVER SECTION -->
        <!-- ========================= -->
        <mxCell id="failover-section" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;strokeColor=#00599C;fillColor=#E3F2FD;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="900" y="80" width="460" height="300" as="geometry" />
        </mxCell>
        <mxCell id="failover-label" value="&lt;b&gt;4. FAILOVER OPERATIONS&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#00599C;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="920" y="90" width="420" height="30" as="geometry" />
        </mxCell>
        
        <!-- SQL MI Failover -->
        <mxCell id="sqlmi-failover" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#00599C;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="920" y="135" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="sqlmi-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/SQL_Managed_Instance.svg;" vertex="1" parent="1">
          <mxGeometry x="930" y="145" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sqlmi-title" value="SQL MI Failover Group" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="975" y="150" width="135" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sqlmi-cmd" value="Switch-AzSql&#xa;DatabaseInstance&#xa;FailoverGroup" style="text;html=1;strokeColor=none;fillColor=#E8E8E8;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="935" y="190" width="170" height="45" as="geometry" />
        </mxCell>
        
        <!-- Redis Failover -->
        <mxCell id="redis-failover" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#00599C;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="920" y="255" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="redis-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/databases/Cache_Redis.svg;" vertex="1" parent="1">
          <mxGeometry x="930" y="265" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="redis-title" value="Redis Geo-Replication" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="975" y="270" width="135" height="20" as="geometry" />
        </mxCell>
        <mxCell id="redis-cmd" value="Remove-AzRedis&#xa;CacheLink&#xa;(Promotes Secondary)" style="text;html=1;strokeColor=none;fillColor=#E8E8E8;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="935" y="310" width="170" height="45" as="geometry" />
        </mxCell>
        
        <!-- Front Door -->
        <mxCell id="fd-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#00599C;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="1140" y="135" width="200" height="230" as="geometry" />
        </mxCell>
        <mxCell id="fd-icon" value="" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/azure2/networking/Front_Doors.svg;" vertex="1" parent="1">
          <mxGeometry x="1150" y="145" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fd-title" value="Azure Front Door" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1195" y="150" width="135" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fd-auto" value="âœ… AUTOMATIC&#xa;&#xa;Health Probes detect&#xa;backend failure&#xa;&#xa;Traffic automatically&#xa;routed to healthy&#xa;secondary region&#xa;&#xa;No runbook action&#xa;required" style="text;html=1;strokeColor=none;fillColor=#E8F5E9;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1155" y="195" width="170" height="155" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Automation to Failover -->
        <mxCell id="arrow-aa-failover" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#5C2D91;endArrow=blockThin;endFill=1;" edge="1" parent="1" source="automation-section" target="failover-section">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-aa-label" value="Execute" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="855" y="200" width="50" height="20" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- RESULT SECTION (Bottom) -->
        <!-- ========================= -->
        <mxCell id="result-box" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=0;strokeColor=#107C10;fillColor=#107C10;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="300" y="420" width="800" height="80" as="geometry" />
        </mxCell>
        <mxCell id="result-title" value="âœ… RESULT: Traffic Now Served from Secondary Region (Central US)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="400" y="430" width="600" height="30" as="geometry" />
        </mxCell>
        <mxCell id="result-detail" value="SQL MI: Secondary promoted to Primary  |  Redis: Geo-link removed, secondary standalone  |  Front Door: Automatic health-based routing" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="350" y="460" width="700" height="30" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Failover to Result -->
        <mxCell id="arrow-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#00599C;endArrow=blockThin;endFill=1;" edge="1" parent="1" source="failover-section" target="result-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ========================= -->
        <!-- LEGEND -->
        <!-- ========================= -->
        <mxCell id="legend" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=4 4;strokeColor=#666666;fillColor=#F5F5F5;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="400" width="230" height="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="50" y="405" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-1" value="â–  Alert Trigger" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#107C10;" vertex="1" parent="1">
          <mxGeometry x="50" y="425" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-2" value="â–  Action Group" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#0078D4;" vertex="1" parent="1">
          <mxGeometry x="50" y="440" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-3" value="â–  Automation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#5C2D91;" vertex="1" parent="1">
          <mxGeometry x="50" y="455" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-4" value="â–  Failover Ops" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#00599C;" vertex="1" parent="1">
          <mxGeometry x="50" y="470" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-5" value="â–  Webhook Call" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#FF8C00;" vertex="1" parent="1">
          <mxGeometry x="150" y="425" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-6" value="â–  Success" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#107C10;" vertex="1" parent="1">
          <mxGeometry x="150" y="440" width="100" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-7" value="â–  Critical Alert" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#E74C3C;" vertex="1" parent="1">
          <mxGeometry x="150" y="455" width="100" height="15" as="geometry" />
        </mxCell>
        
        <!-- RTO Note -->
        <mxCell id="rto-note" value="â±ï¸ Target RTO: &lt; 1 hour (Automated components: minutes)" style="text;html=1;strokeColor=none;fillColor=#FFF3E0;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="510" width="800" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
